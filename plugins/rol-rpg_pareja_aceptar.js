import fetch from 'node-fetch' 
import { areJidsSameUser } from '@adiwajshing/baileys'
let handler = async (m, { conn, text, participants, groupMetadata }) => {
let fkontak = { "key": { "participants":"0@s.whatsapp.net", "remoteJid": "status@broadcast", "fromMe": false, "id": "Halo" }, "message": { "contactMessage": { "vcard": `BEGIN:VCARD\nVERSION:3.0\nN:Sy;Bot;;;\nFN:y\nitem1.TEL;waid=${m.sender.split('@')[0]}:${m.sender.split('@')[0]}\nitem1.X-ABLabel:Ponsel\nEND:VCARD` }}, "participant": "0@s.whatsapp.net" }
let grupos = [nna, nn, nnn, nnnt]
let gata = [img5, img6, img7, img8, img9]
let enlace = { contextInfo: { externalAdReply: {title: wm + '', body: 'support group' , sourceUrl: grupos.getRandom(), thumbnail: await(await fetch(gata.getRandom())).buffer() }}}
let enlace2 = { contextInfo: { externalAdReply: { showAdAttribution: true, mediaUrl: yt, mediaType: 'VIDEO', description: '', title: wm, body: 'ğŸ¤– ğ’ğ”ğğ„ğ‘ ğŒğ€ğŠğ€ğğ€ğŠğ˜ - ğ–ğ‡ğ€ğ“ğ’ğ€ğğ ğŸ¤–', thumbnailUrl: await(await fetch(global.img)).buffer(), sourceUrl: yt }}}
let dos = [enlace, enlace2]

let who = m.mentionedJid && m.mentionedJid[0] ? m.mentionedJid[0] : m.fromMe ? conn.user.jid : m.sender
let mentionedJid = [who]
var number = text.split`@`[1]

if(!text && !m.quoted) return await conn.sendButton(m.chat, `${mg}ğ™´ğšƒğ™¸ğš€ğš„ğ™´ğšƒğ™´ ğ™¾ ğšğ™´ğš‚ğ™¿ğ™¾ğ™½ğ™³ğ™´ ğ™°ğ™» ğ™¼ğ™´ğ™½ğš‚ğ™°ğ™¹ğ™´ ğ™³ğ™´ ğ™»ğ™° ğ™¿ğ™´ğšğš‚ğ™¾ğ™½ğ™° ğš€ğš„ğ™´ ğš€ğš„ğ™¸ğ™´ğšğ™´ ğš€ğš„ğ™´ ğš‚ğ™´ğ™° ğš‚ğš„ ğ™¿ğ™°ğšğ™´ğ™¹ğ™° `, wm, null, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], fkontak, m)
	
try {
if(text) {
var user = number + '@s.whatsapp.net'
} else if(m.quoted.sender) {
var user = conn.getName(m.quoted.sender)
} else if(m.mentionedJid) {
var user = number + '@s.whatsapp.net'
}  
} catch (e) {
} finally {
	
let users = m.isGroup ? participants.find(v => areJidsSameUser(v.jid == user)) : {}
let yo = conn.getName(m.sender)
let tu = conn.getName(who)

if(!users) return await conn.sendButton(m.chat, `${fg}ğ™½ğ™¾ ğš‚ğ™´ ğ™´ğ™½ğ™²ğ™¾ğ™½ğšƒğšğ™¾Ì ğ™° ğ™»ğ™° ğ™¿ğ™´ğšğš‚ğ™¾ğ™½ğ™° â˜¹ï¸, ğ™³ğ™´ğ™±ğ™´ ğ™³ğ™´ ğ™´ğš‚ğšƒğ™°ğš ğ™´ğ™½ ğ™´ğš‚ğšƒğ™´ ğ™¶ğšğš„ğ™¿ğ™¾ ğŸ¤—`, wm, null, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], fkontak, m)
	
if(user === m.sender) return await conn.sendButton(m.chat, `${fg}ğš„ğš‚ğšƒğ™´ğ™³ ğ™¼ğ™¸ğš‚ğ™¼ğ™¾ ğ™½ğ™¾ ğ™¿ğš„ğ™´ğ™³ğ™´ ğš‚ğ™´ğš ğ™¿ğ™°ğšğ™´ğ™¹ğ™° ğŸ™‚`, wm, null, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], fkontak, m)
	
if(user === conn.user.jid) return await conn.sendButton(m.chat, `${fg}ğšˆğ™¾ ğ™½ğ™¾ ğ™¿ğš„ğ™´ğ™³ğ™¾ ğš‚ğ™´ğš ğšƒğš„ ğ™¿ğ™°ğšğ™´ğ™¹ğ™° ğŸ˜¹`, wm, null, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], fkontak, m)
    
if(global.db.data.users[user].pasangan != m.sender){ 
return await conn.sendButton(m.chat, `ğ™½ğ™¾ ğ™¿ğš„ğ™´ğ™³ğ™´ğš‚ ğ™°ğ™²ğ™´ğ™¿ğšƒğ™°ğš ğš‚ğ™¸ ğ™½ğ™°ğ™³ğ™¸ğ™´ ğš‚ğ™´ ğ™·ğ™° ğ™³ğ™´ğ™²ğ™»ğ™°ğšğ™°ğ™³ğ™¾, ğ™³ğ™´ğ™²ğ™»ğ™°ğšğ™°ğšƒğ™´ ğ™²ğ™¾ğ™½ *${tu}* ğ™¿ğ™°ğšğ™° ğš€ğš„ğ™´ ğ™³ğ™¸ğ™¶ğ™° ğš‚ğ™¸ ğšƒğ™´ ğ™°ğ™²ğ™´ğ™¿ğšƒğ™° ğ™¾ ğšƒğ™´ ğšğ™´ğ™²ğ™·ğ™°ğš‰ğ™°`, wm, null, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], fkontak, m, { contextInfo: { mentionedJid: [user, tu]}})	
	
}else{
global.db.data.users[m.sender].pasangan = user
return await conn.sendButton(m.chat, `ğŸ¥³ ğ™µğ™´ğ™»ğ™¸ğ™²ğ™¸ğšƒğ™°ğ™²ğ™¸ğ™¾ğ™½ğ™´ğš‚! *${tu}*\nâœ… ğ™³ğ™´ ğ™¼ğ™°ğ™½ğ™´ğšğ™° ğ™¾ğ™µğ™¸ğ™²ğ™¸ğ™°ğ™» ğ™´ğš‚ğšƒğ™°ğ™½ ğ™´ğ™½ ğš„ğ™½ğ™° ğšğ™´ğ™»ğ™°ğ™²ğ™¸ğ™¾ğ™½\n\nğš€ğš„ğ™´ ğ™³ğš„ğšğ™´ ğ™¿ğ™¾ğš ğš‚ğ™¸ğ™´ğ™¼ğ™¿ğšğ™´ ğš‚ğš„ ğ™°ğ™¼ğ™¾ğš ğšˆ ğ™µğ™´ğ™»ğ™¸ğ™²ğ™¸ğ™³ğ™°ğ™³ ğŸ’–ğŸ˜` + wm, img5, [
['ğ—  ğ—˜ ğ—¡ ğ—¨ â˜˜ï¸', '/menu']], m, dos.getRandom(), { contextInfo: { mentionedJid: [user, tu, yo]}})	
}}}

handler.command = /^(aceptar|acepto|accept)$/i
handler.group = true
export default handler
